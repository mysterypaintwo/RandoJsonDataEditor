<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>RandoJsonDataVisualEditor</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <!-- Top toolbar for general actions -->
    <div id="toolbar">
      <button id="setDirBtn" class="tool-btn">Set Working Directory</button>
      <button id="drawModeBtn" class="tool-btn">Draw Node</button>
      <button id="selectModeBtn" class="tool-btn">Select Node</button>
      <button id="moveModeBtn" class="tool-btn">Move Node</button>
      <button id="resizeModeBtn" class="tool-btn">Resize Node</button>
      <button id="gotoRoomBtn" class="tool-btn" style="margin-left: 20px; background: #4CAF50; color: white;">üìç Go To Room (Ctrl+G)</button>
      <span id="currentDir"></span>
    </div>
    <!-- Sector selection buttons -->
    <div id="sector-buttons">
      <button class="sector-btn" data-sector="L-X">L-X</button>
      <button class="sector-btn" data-sector="MDK">MDK</button>
      <button class="sector-btn" data-sector="SRX">SRX</button>
      <button class="sector-btn" data-sector="TRO">TRO</button>
      <button class="sector-btn" data-sector="PYR">PYR</button>
      <button class="sector-btn" data-sector="AQA">AQA</button>
      <button class="sector-btn" data-sector="ARC">ARC</button>
      <button class="sector-btn" data-sector="NOC">NOC</button>
      <button class="sector-btn" data-sector="DMX">DMX</button>
    </div>
    <!-- Main container -->
    <div id="main-container">
      <!-- Left pane: Door navigation and Items -->
      <div id="left-pane">
        <!-- Door Navigation Section -->
        <div style="margin-bottom: 8px; font-weight: bold; font-size: 14px; padding: 8px; background: #f0f0f0; border-radius: 4px;"> Door Navigation </div>
        <div id="doorButtons" style="flex: 1; overflow-y: auto; padding-right: 4px; margin-bottom: 8px;">
          <!-- Door buttons will be dynamically populated here -->
        </div>
        <!-- Items Section -->
        <div style="margin-bottom: 4px; font-weight: bold; font-size: 12px; padding: 6px; background: #f0f0f0; border-radius: 4px;"> Items </div>
        <div id="itemsList" style="max-height: 150px; overflow-y: auto; padding: 4px; margin-bottom: 8px; font-size: 10px;">
          <!-- Items will be dynamically populated here -->
        </div>
        <button id="roomPropertiesBtn" style="width: 100%; padding: 12px; font-weight: bold; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 13px;">‚öôÔ∏è Edit Room Properties (Ctrl+P)</button>
      </div>
      <!-- Right pane: JSON editor and map -->
      <div id="right-pane">
        <div id="json-editor" class="resizable-panel">
          <div class="panel-header">
            <span style="font-weight: bold; font-size: 12px;">JSON Editor</span>
            <span style="font-size: 11px; color: #666; margin-left: 10px;">Ctrl+S to save</span>
          </div>
          <textarea id="jsonTextArea" spellcheck="false"></textarea>
          <button id="saveBtn">üíæ Save JSON (Ctrl+S)</button>
          <div class="resize-handle" id="jsonResizeHandle"></div>
        </div>
        <div id="map-container">
          <canvas id="roomCanvas"></canvas>
        </div>
      </div>
    </div>
    <!-- Go To Room Modal -->
    <div id="gotoModal" class="modal-overlay" style="display: none;">
      <div class="modal-content" style="width: 500px; max-height: 80vh;">
        <h3 style="margin-top: 0;">Go To Room</h3>
        <input type="text" id="gotoSearchInput" placeholder="Type to search rooms..." style="width: 100%; padding: 8px; margin-bottom: 12px; font-size: 14px; box-sizing: border-box;" />
        <div id="gotoRoomList" style="max-height: 50vh; overflow-y: auto; border: 1px solid #ccc; border-radius: 4px;">
          <!-- Room list will be populated here -->
        </div>
        <div style="margin-top: 12px; text-align: right;">
          <button id="gotoCancelBtn" style="padding: 8px 16px; margin-right: 8px;">Cancel</button>
        </div>
      </div>
    </div>
    <script type="module" src="../app.js"></script>
    <div id="tooltip" style="
			position:absolute;
			display:none;
			background:#222;
			color:#fff;
			padding:2px 6px;
			border-radius:4px;
			font-size:12px;
			pointer-events:none;
		"></div>
  </body>
</html>